<!doctype html>
<html lang="en" {% if userPreference.darkMode %} class='dark-theme'{% endif %}>

{% load static %}
{% load userModules %}


<!-- Mirrored from codervent.com/syndron/demo/vertical/index2.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Jul 2023 03:51:49 GMT -->
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--favicon-->
	<link rel="icon" href="{% static "assets/images/login-images/login-cover.svg" %}" type="image/png" />
	<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">


	{% block head %}
	<link href="{% static "assets/plugins/simplebar/css/simplebar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/metismenu/css/metisMenu.min.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/datatable/css/dataTables.bootstrap5.min.css" %}" rel="stylesheet" />
	<!-- loader-->
	<link href="{% static "assets/css/pace.min.css" %}" rel="stylesheet" />
	<script src="{% static "assets/js/pace.min.js" %}"></script>
	<!-- Bootstrap CSS -->
	<link href="{% static "assets/css/bootstrap.min.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/bootstrap-extended.css" %}" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&amp;display=swap" rel="stylesheet">
	<link href="{% static "assets/css/app.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/icons.css" %}" rel="stylesheet">
	<!-- Theme Style CSS -->
	<link rel="stylesheet" href="{% static "assets/css/dark-theme.css" %}" />
	<link rel="stylesheet" href="{% static "assets/css/semi-dark.css" %}" />
	<link rel="stylesheet" href="{% static "assets/css/header-colors.css" %}" />

	<!--plugins-->
	<link href="{% static "assets/plugins/fullcalendar/css/main.min.css" %}" rel="stylesheet" />

	<title>Home </title>
	{% endblock %}
</head>


<body>
	<!--wrapper-->
	<div class="wrapper">
		<!--sidebar wrapper -->
		<div class="sidebar-wrapper" data-simplebar="true">
			<div class="sidebar-header">
				<div>
					<img src="{% static "assets/images/login-images/login-cover.svg" %}" class="logo-icon" alt="logo icon">
				</div>
				<div>
					<h6 class="logo-text">{{nameCompany.company_name}}</h6>
				</div>
				<div class="toggle-icon ms-auto">
					<i class="fadeIn animated bx bx-menu"></i>
				</div>
			 </div>
			<!--navigation-->
			
			<ul class="metismenu" id="menu">	

				<li>
					<a href="javascript:;" class="has-arrow">
						<div class="parent-icon"><i class='bx bx-home-alt'></i></div>
						<div class="menu-title">Dashboard</div>
					</a>
					<ul>						
						<li> <a href="{% url 'index'  %}"><i class='bx bx-radio-circle'></i>Home</a>
						</li>

	

					</ul>
				</li>				

				<li class="menu-label">Ingresar Informacion</li>
				<li>
					<a href="javascript:;" class="has-arrow">
						<div class="parent-icon"><i class="fadeIn animated bx bx-user-plus"></i></div>
						<div class="menu-title">Nueva informacion</div>
					</a>
					<ul>
						<li> <a href="{% url 'formCreateClients' %}"><i class='bx bx-radio-circle'></i>Crear Cliente</a> </li>
							<li> <a href="{% url 'formCreateAlert' %}"><i class='bx bx-radio-circle'></i>Crear Alert</a> </li>
					
					</ul>
				</li>			

				
				<li class="menu-label">Users</li>
				<li>
					<a class="has-arrow" href="javascript:;">
						<div class="parent-icon"> <i class="lni lni-network"></i> </div>
						<div class="menu-title">Profile</div>
					</a>
					<ul>
						<li> <a href="{% url 'formCreateUser'  %}"><i class='bx bx-radio-circle'></i>View User</a>
						</li>
					</ul>
				</li>

				{% if request.user.is_superuser %}
					<li class="menu-label">Company</li>
					<li>
						<a class="has-arrow" href="javascript:;">
							<div class="parent-icon"> <i class="lni lni-apartment"></i> </div>
							<div class="menu-title">All Company</div>
						</a>
						<ul>
							<li> <a href="{% url 'formCreateCompanies' %}"><i class='bx bx-radio-circle'></i>Add Company</a>
							</li>
						</ul>
					</li>
				{% endif %}	

			</ul>

			<!--end navigation-->
		</div>
		<!--end sidebar wrapper -->
		<!--start header -->
		<header>
			<div class="topbar d-flex align-items-center">
				<nav class="navbar navbar-expand gap-3">
					<div class="mobile-toggle-menu"><i class='bx bx-menu'></i>
					</div>

					<h4 class="mb-3 mb-md-0">Dashboard</h4>

					  <div class="top-menu ms-auto">
						<ul class="navbar-nav align-items-center gap-1">
						
							
							<li class="nav-item dark-mode d-none d-sm-flex">
								<a id='dark-mode' class="nav-link dark-mode-icon" href="javascript:;"><i class='bx {%if userPreference.darkMode%}bx-sun{%else%}bx-moon{%endif%}'></i>
								</a>
							</li>

							<li class="nav-item dropdown dropdown-app">
								<div class="dropdown-menu dropdown-menu-end p-0">
									<div class="app-container p-2 my-2">								  
				
									</div>
								</div>
							</li>

							<li hidden class="nav-item dropdown dropdown-large">
								<a class="nav-link dropdown-toggle dropdown-toggle-nocaret position-relative" href="#" data-bs-toggle="dropdown">
									{% if alertCount > 0 %}
										<span class="alert-count">{{ alertCount }}</span>  <!-- Mostrar contador de alertas -->
									{% endif %}
									<i class="bx bx-bell"></i>
								</a>
								<div class="dropdown-menu dropdown-menu-end">
									<a href="javascript:;">
										<div class="msg-header">
											<p class="msg-header-title">Notifications</p>
											<p class="msg-header-badge">{{ alertCount }} New</p>
										</div>
									</a>
									<div class="header-notifications-list">
										{% if expiredAlerts %}
											{% for alert in expiredAlerts %}
											<a class="dropdown-item" href="javascript:;">
												<div class="d-flex align-items-center">
													<div class="flex-grow-1">
														<h6 class="msg-name">{{ alert.name_client }} <span class="msg-time float-end">{{ alert.datetime }}</span></h6>
														<p class="msg-info">{{ alert.content }}</p>
													</div>
												</div>
											</a>
											{% endfor %}
										{% else %}
											<p>No expired alerts</p>  <!-- Si no hay alertas vencidas -->
										{% endif %}
									</div>
									<a href="{% url 'index' %}">
										<div class="text-center msg-footer">
											<button class="btn btn-primary w-100">View All Notifications</button>
										</div>
									</a>
								</div>

							</li>										
							
							<li class="nav-item dropdown dropdown-large">
								<div class="dropdown-menu dropdown-menu-end">
									<div class="header-message-list">										
									</div>
								</div>
							</li>
							
						</ul>
					</div>
					<div class="user-box dropdown px-3">
						<a class="d-flex align-items-center nav-link dropdown-toggle gap-3 dropdown-toggle-nocaret" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user text-primary">
								<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
							<div class="user-info">
								<p class="user-name mb-0">{{request.user.first_name}} {{request.user.last_name}}</p>
								<p class="designattion mb-0">{{request.user}}</p>
							</div>
						</a>
						<ul class="dropdown-menu dropdown-menu-end">
							<li><a class="dropdown-item d-flex align-items-center" href="{% url 'logout' %}"><i class="bx bx-log-out-circle"></i><span>Logout</span></a>
							</li>
						</ul>
					</div>
				</nav>
			</div>
		</header>
		<!--end header -->
		<!--start page wrapper -->

	

		<div class="page-wrapper">
			<div class="page-content">
				{% block page_content %}

					<h6 class="mb-0 text-uppercase">Calendario de Citas</h6>

					<hr/>

					<div class="card">
						<div class="card-body">
							<div class="table-responsive">
								<div id='calendar'></div>
							</div>
						</div>
					</div>

					<!-- Modal para mostrar detalles del evento -->
					<div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="eventModalLabel">Detalles de la Alerta</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<p><strong>Cliente:</strong> <span id="modal-client-name"></span></p>
									<p><strong>Phone:</strong> <span id="modal-client-phone"></span></p>
									<p><strong>Agente:</strong> <span id="modal-agent-name"></span></p>
									<p><strong>Fecha:</strong> <span id="modal-date"></span></p>
									<p><strong>Hora:</strong> <span id="modal-time"></span></p>
									<p><strong>Observación:</strong> <span id="modal-content"></span></p>
									{% if user_role == 'Admin' %}
									<p><strong>Estado:</strong> <span id="modal-status"></span></p>
									{% endif %}
									{% if is_superuser %}
									<p><strong>Empresa:</strong> <span id="modal-company"></span></p>
									{% endif %}
								</div>
								<div class="modal-footer">

										<a href="#" id="asistio-link" class="btn btn-warning">
											<i class='bx bxs-calendar-check'></i> Asistio 
										</a>
									
									<a href="#" id="edit-link" class="btn btn-primary">
										<i class='bx bxs-edit'></i> Editar
									</a>
									<a href="#" id="toggle-link" class="btn btn-danger">
										<i class='bx bxs-trash'></i> Toggle
									</a>
									<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
								</div>
							</div>
						</div>
					</div>		
			
								
				{% endblock %}
			</div>
		</div>

	

		<!--end page wrapper -->
		<!--start overlay-->
		<div class="overlay toggle-icon"></div>
		<!--end overlay-->
		<!--End Back To Top Button-->
		<footer class="page-footer">
			<p class="mb-0">Copyright © {% now "Y" %}. All rights reserved to Lapeira & Associates.</p>
		</footer>
	</div>


	


	{% block end_js %}

	<!-- Bootstrap JS -->
	<script src="{% static "assets/js/bootstrap.bundle.min.js" %}"></script>
	<!--plugins-->
	<script src="{% static "assets/js/jquery.min.js" %}"></script>
	<script src="{% static "assets/plugins/simplebar/js/simplebar.min.js" %}"></script>
	<script src="{% static "assets/plugins/metismenu/js/metisMenu.min.js" %}"></script>
	<script src="{% static "assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js" %}"></script>
	<script src="{% static "assets/plugins/datatable/js/jquery.dataTables.min.js" %}"></script>
	<script src="{% static "assets/plugins/datatable/js/dataTables.bootstrap5.min.js" %}"></script>

	<!--app JS-->
	<script src="{% static "assets/js/app.js" %}"></script>

	<script src="{% static "assets/plugins/fullcalendar/js/main.min.js"%}"></script>
	<script src="{% static "assets/plugins/fullcalendar/js/configurationCalendario.js"%}"></script>
	
	<script>
		// Inicializar el calendario con los datos de Django
		window.initCalendar(
			{{ events_json|safe }},
			"{{ user_role }}",
			{{ is_superuser|yesno:"true,false" }}
		);
	</script>


	{% endblock %}

</body>


<!-- Mirrored from codervent.com/syndron/demo/vertical/index2.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 29 Jul 2023 03:52:27 GMT -->
</html>