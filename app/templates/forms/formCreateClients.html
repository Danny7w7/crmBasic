{% extends "dashboard/index.html" %}
{% load static %}
{% block head %}
    <title>Creation User</title>
	<!--plugins-->
	<link href="{% static "assets/plugins/simplebar/css/simplebar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/metismenu/css/metisMenu.min.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/datatable/css/dataTables.bootstrap5.min.css" %}" rel="stylesheet" />
	<!-- loader-->
	<link href="{% static "assets/css/pace.min.css" %}" rel="stylesheet" />
	<script src="{% static "assets/js/pace.min.js" %}"></script>
	<!-- Bootstrap CSS -->
	<link href="{% static "assets/css/bootstrap.min.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/bootstrap-extended.css" %}" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&amp;display=swap" rel="stylesheet">
	<link href="{% static "assets/css/app.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/icons.css" %}" rel="stylesheet">
	<!-- Theme Style CSS -->
	<link rel="stylesheet" href="{% static "assets/css/dark-theme.css" %}" />
	<link rel="stylesheet" href="{% static "assets/css/semi-dark.css" %}" />
	<link rel="stylesheet" href="{% static "assets/css/header-colors.css" %}" />
{% endblock %}
{% block page_content %}

   	<div class="container-fluid">

        <div class="row">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Ingreso de clientes</h4>
                        <form id="clientForm" method="POST">
                            <div id="editor">
                                {% csrf_token %}
                                <div id="test-l-1" role="tabpanel" class="bs-stepper-pane" aria-labelledby="stepper1trigger1">
                                    <div class="row g-3">
                                        <div class="col-12 col-lg-4">
                                            <label for="full_name" class="form-label">Nombre Completo</label>
                                            <input type="text" class="form-control" name="full_name" id="full_name" Required>
                                        </div>
                                        <div class="col-12 col-lg-4">
                                            <label for="address" class="form-label">Dirrecion</label>
                                            <input type="text" class="form-control" name="address" id="address" placeholder="Address" Required>
                                        </div>
                                        <div class="col-12 col-lg-4">
                                            <label for="city" class="form-label">City</label>
                                            <input type="text" class="form-control" name ="city" id="city" Required>
                                        </div>
                                        <div class="col-12 col-lg-4">
                                            <label for="country" class="form-label">Pais</label>
                                            <input type="text" class="form-control" name ="country" id="country" Required>
                                        </div>
                                        <div class="col-12 col-lg-4">
                                            <label for="email" class="form-label">E-mail</label>
                                            <input type="email" class="form-control" name="email" id="email" placeholder="Enter Email Address" Required>
                                        </div>  
                                        <div class="col-12 col-lg-4">
                                            <label for="cod_number" class="form-label">Codigo del Numero</label>
                                            <select name="cod_number" class="form-select"  id="cod_number" required>
                                                <option value="" disabled selected>Selecciona un prefijo </option>
                                                <option value="+1">+1 (Estados Unidos, Canadá, etc.)</option>
                                                <option value="+7">+7 (Rusia, Kazajistán)</option>
                                                <option value="+27">+27 (Sudáfrica)</option>
                                                <option value="+33">+33 (Francia)</option>
                                                <option value="+34">+34 (España)</option>
                                                <option value="+39">+39 (Italia)</option>
                                                <option value="+44">+44 (Reino Unido)</option>
                                                <option value="+49">+49 (Alemania)</option>
                                                <option value="+51">+51 (Perú)</option>
                                                <option value="+52">+52 (México)</option>
                                                <option value="+54">+54 (Argentina)</option>
                                                <option value="+55">+55 (Brasil)</option>
                                                <option value="+56">+56 (Chile)</option>
                                                <option value="+57">+57 (Colombia)</option> 
                                                <option value="+61">+61 (Australia)</option>
                                                <option value="+81">+81 (Japón)</option>
                                                <option value="+82">+82 (Corea del Sur)</option>
                                                <option value="+86">+86 (China)</option>
                                                <option value="+91">+91 (India)</option>
                                                <option value="+971">+971 (Emiratos Árabes Unidos)</option>
                                                <option value="+53">+53 (Cuba)</option>
                                                <option value="+502">+502 (Guatemala)</option>
                                                <option value="+503">+503 (El Salvador)</option>
                                                <option value="+504">+504 (Honduras)</option>
                                                <option value="+505">+505 (Nicaragua)</option>
                                                <option value="+506">+506 (Costa Rica)</option>
                                                <option value="+507">+507 (Panamá)</option>
                                                <option value="+509">+509 (Haití)</option>
                                                <option value="+58">+58 (Venezuela)</option>
                                                <option value="+591">+591 (Bolivia)</option>
                                                <option value="+593">+593 (Ecuador)</option>
                                                <option value="+595">+595 (Paraguay)</option>
                                                <option value="+598">+598 (Uruguay)</option>
                                            </select>
                                        </div>
                                        <div class="col-12 col-lg-4">
                                            <label for="phone_number" class="form-label">Telefono</label>
                                            <input type="number" class="form-control" name ="phone_number" id="phone_number" placeholder="Phone Number" Required>
                                        </div>
                                        <div class="col-12 col-lg-12">
                                            <label for="description" class="form-label">Descripción</label>
                                            <textarea class="form-control" name="description" rows="3" style="resize: none" placeholder="Observation" ></textarea>
                                        </div>
                                        <h5 class="text-danger text-center">{{error_message}}</h5>
                                        <div class="col-12 col-lg-12">
                                            <button type="submit" class="btn btn-primary px-4" id="sendClient">Submit</button>
                                        </div>
                                        
                                    </div>                                
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Table de clientes</h4>
                        <div class="table-responsive">
                            <table id="clients" class="table border table-striped table-bordered text-nowrap">
                                <thead>
                                    <tr>   
                                        <th>Usuario</th>                                   
                                        <th>Nombre completo</th>
                                        <th>Dirrecion</th>
                                        <th>Ciudad</th>
                                        <th>Pais</th>
                                        <th>Date</th>
                                        <th>Option</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for item in clientsTable %}
                                    <tr>
                                        <td>{{item.agent.first_name}} {{item.agent.last_name}}</td>
                                        <td>{{item.full_name}} </td>
                                        <td>{{item.address}} </td>
                                        <td>{{item.city}}</td> 
                                        <td>{{item.country}}</td> 	
                                        <td>{{item.created_at|date:"m-d-Y"}}</td> 			
                                        <td>
                                            <a class="btn btn-outline-primary view-client" data-id="{{ item.id }}" data-bs-toggle="modal" data-bs-target="#clientModal"> View </a>
                                            <a href="{% url 'editClient' item.id %}" type="button" class="btn btn-outline-warning" > Editar </a>
                                            <a href="{% url 'toggleClients' item.id %}" type="button" class="btn btn-outline-danger" > Delete </a>
                                        </td> 
                                    </tr>
                                    {% endfor %}
                                </tbody>                                       
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>        

    </div>     
    
    <div class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="clientModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="remitterModalLabel">Información del Remitente</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <p><strong>Nombre:</strong> <span id="modal-r-full-name"></span></p>
                    <p><strong>Dirección:</strong> <span id="modal-r-address"></span></p>
                    <p><strong>Ciudad:</strong> <span id="modal-r-city"></span></p>
                    <p><strong>País:</strong> <span id="modal-r-country"></span></p>
                    <p><strong>Código #:</strong> <span id="modal-r-cod"></span></p>
                    <p><strong>Teléfono:</strong> <span id="modal-r-phone"></span></p>
                    <p><strong>Email:</strong> <span id="modal-r-email"></span></p>
                    <p><strong>Creado en (M-D-Y):</strong>  <span id="modal-r-created"></span></p>
                </div>
            </div>
        </div>
    </div>



{% endblock %}
{% block end_js %}
	<!-- Bootstrap JS -->
	<script src="{% static "assets/js/bootstrap.bundle.min.js" %}"></script>
	<!--plugins-->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script src="{% static "assets/js/jquery.min.js" %}"></script>
	<script src="{% static "assets/plugins/simplebar/js/simplebar.min.js" %}"></script>
	<script src="{% static "assets/plugins/metismenu/js/metisMenu.min.js" %}"></script>
	<script src="{% static "assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js" %}"></script>
	<script src="{% static "assets/plugins/datatable/js/jquery.dataTables.min.js" %}"></script>
	<script src="{% static "assets/plugins/datatable/js/dataTables.bootstrap5.min.js" %}"></script>

    <script src="{% static 'assets/js/modals/clients.js' %}"></script> 
    <script src="{% static 'assets/js/validations/duplicados.js' %}"></script>  

	{% if client_error %}
        <script>
            Swal.fire({
                icon: 'warning',
                title: 'Atención',
                text: "{{ client_error }}",
                confirmButtonText: 'Entendido'
            });
        </script>
    {% endif %}

	<!--app JS-->
	<script src="{% static "assets/js/app.js" %}"></script>
	<script> $(document).ready(function() {$('#clients').DataTable();} );	</script>
	
	

{% endblock %}